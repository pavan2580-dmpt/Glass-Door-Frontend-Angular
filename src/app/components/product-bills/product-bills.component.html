<div class="container shadow-sm rounded p-0 w-full">
  <app-header></app-header>
  <div class="row product-list-sec">
    <div class="col-md-6">
      <h4 class="mb-0 bill">
        Bills -
        <span class="count">({{ totalItems ? totalItems : "0" }})</span>
      </h4>
    </div>
    <div class="col-md-6 d-flex justify-content-end">
      @if(userRole === 'superAdmin'){
      <input
        class="form-control search"
        type="date"
        [(ngModel)]="selectedDate"
        (change)="onDateChange()"
      />
      }
      <input
        class="form-control search text-capitalize"
        placeholder="Search..."
        type="text"
        [(ngModel)]="searchTerm"
        (keyup)="onSearch()"
      />
      <button [routerLink]="'/create-bills'" class="btn btn-primary">
        Add
      </button>
    </div>
  </div>
  <div class="table-container">
    <table class="table mb-0">
      <thead class="fixed-header">
        <tr>
          <th>#Bill No.</th>
          <th>Customer Name</th>
          <th>City</th>
          <th>Amount</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody class="scrollable-tbody">
        @for(list of billsData; track list){
        <tr>
          <td>{{ list.billNo }}</td>
          <td>{{ list.customerName }}</td>
          <td>{{ list.city }}</td>
          <td class="price">{{ list.total | currency : "INR" }}</td>
          <td>{{ list.createdAt | date : "mediumDate" }}</td>
          <td>
            <div class="btns">
              <button (click)="editBill(list._id)" class="btn text-primary">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
              <button (click)="deleteProduct(list._id)" class="btn text-danger">
                <i class="fa fa-trash" aria-hidden="true"></i>
              </button>
            </div>
          </td>
        </tr>
        } @if(billsData.length === 0){
        <tr>
          <td colspan="4" class="text-center">No data found...!</td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  @if(billsData.length){
  <div class="page_nation">
    <p>Showing {{ currentPage }} of {{ totalItems }} entries</p>
    <ngb-pagination
      [collectionSize]="totalItems"
      [(page)]="currentPage"
      [pageSize]="itemsPerPage"
      (pageChange)="onPageChange($event)"
    >
    </ngb-pagination>
  </div>
  }
</div>
